<!-- Modal para Conexiones -->
<div id="connection-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Configurar Conexión</h3>
            <button class="modal-close" onclick="closeConnectionModal()" title="Cerrar">&times;</button>
        </div>
        <div class="modal-body">
            <!-- Información de dispositivos conectados -->
            <div class="device-info">
                <div class="device-info-label">Desde:</div>
                <div class="device-info-value" id="conn-from-name"></div>
            </div>
            
            <!-- Selector de tipo de conexión -->
            <div class="input-group">
                <label>Tipo de Conexión</label>
                <select id="new-connection-type" onchange="toggleNewConnectionFields()">
                    <option value="normal">Normal</option>
                    <option value="etherchannel">EtherChannel</option>
                </select>
            </div>

            <!-- Campos para conexión normal -->
            <div id="new-normal-fields">
                <div class="input-group">
                    <label>Interfaz (origen)</label>
                    <div id="conn-from-selects" style="display: flex; gap: 8px;">
                        <select id="conn-from-type" onchange="updateFromInterfaceList()" style="flex: 0 0 140px;">
                            <option value="fa">FastEthernet</option>
                            <option value="gi">GigabitEthernet</option>
                            <option value="eth">Ethernet</option>
                        </select>
                        <select id="conn-from-number" style="flex: 1;">
                            <option value="">Seleccionar interfaz...</option>
                        </select>
                    </div>
                    <small id="conn-from-auto-notice" style="display: none; color: var(--color-titles-light); margin-top: 4px;">
                        ✓ Interfaz asignada automáticamente para este dispositivo
                    </small>
                </div>
                
                <div class="device-info">
                    <div class="device-info-label">Hacia:</div>
                    <div class="device-info-value" id="conn-to-name"></div>
                </div>
                
                <div class="input-group">
                    <label>Interfaz (destino)</label>
                    <div id="conn-to-selects" style="display: flex; gap: 8px;">
                        <select id="conn-to-type" onchange="updateToInterfaceList()" style="flex: 0 0 140px;">
                            <option value="fa">FastEthernet</option>
                            <option value="gi">GigabitEthernet</option>
                            <option value="eth">Ethernet</option>
                        </select>
                        <select id="conn-to-number" style="flex: 1;">
                            <option value="">Seleccionar interfaz...</option>
                        </select>
                    </div>
                    <small id="conn-to-auto-notice" style="display: none; color: var(--color-titles-light); margin-top: 4px;">
                        ✓ Interfaz asignada automáticamente para este dispositivo
                    </small>
                </div>
            </div>

            <!-- Campos para EtherChannel -->
            <div id="new-etherchannel-fields" style="display: none;">
                <div class="input-group">
                    <label>Protocolo</label>
                    <select id="new-etherchannel-protocol">
                        <option value="lacp">LACP</option>
                        <option value="pagp">PAgP</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Channel Group</label>
                    <input type="number" id="new-etherchannel-group" placeholder="1" min="1" max="6" value="1">
                </div>

                <div style="background: var(--color-bg-light); padding: 15px; border-radius: 6px; margin-bottom: 15px;">
                    <h4 style="color: var(--color-titles-light); margin-bottom: 10px; font-size: 13px;">Origen</h4>
                    <div class="input-group">
                        <label>Tipo de Interfaz</label>
                        <select id="new-etherchannel-from-type">
                            <option value="fa">FastEthernet</option>
                            <option value="gi">GigabitEthernet</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Rango</label>
                        <input type="text" id="new-etherchannel-from-range" placeholder="0/1-3" value="0/1-3">
                    </div>
                </div>

                <div class="device-info">
                    <div class="device-info-label">Hacia:</div>
                    <div class="device-info-value" id="conn-to-name-ec"></div>
                </div>

                <div style="background: var(--color-bg-cards-light); padding: 15px; border-radius: 6px;">
                    <h4 style="color: var(--color-titles-light); margin-bottom: 10px; font-size: 13px;">Destino</h4>
                    <div class="input-group">
                        <label>Tipo de Interfaz</label>
                        <select id="new-etherchannel-to-type">
                            <option value="fa">FastEthernet</option>
                            <option value="gi">GigabitEthernet</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Rango</label>
                        <input type="text" id="new-etherchannel-to-range" placeholder="0/1-3" value="0/1-3">
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeConnectionModal()">Cancelar</button>
            <button class="btn" onclick="saveConnection()">Guardar</button>
        </div>
    </div>
</div>